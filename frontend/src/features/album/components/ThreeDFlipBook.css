.flipbook-wrapper {
    perspective: 3500px;
    width: 100%;
    max-width: 4800px;
    /* Reduced max-height slightly to make it look a bit smaller and fit the screen perfectly */
    height: 70vh;
    margin: 0 auto;
    display: flex;
    margin-top: -5% !important;
    align-items: center;
    justify-content: center;
    padding-inline: 10px;
    scale: 0.8;
   
}

.book-container {
    width: 100%;
    /* 6:2 aspect ratio means each page (half the width) is 3:2 */
    aspect-ratio: 6 / 2;
    max-height: 70vh;
    position: relative;
    display: flex;
    transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
    transform-style: preserve-3d;
    border-radius: 15px;
    overflow: hidden;
}

.book-container.closed-front {
    transform: translateX(-25%);
}

.book-container.closed-back {
    transform: translateX(25%);
}

.book-container.open {
    transform: translateX(0);
}

.book-sheet {
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    transform-style: preserve-3d;
    transform-origin: left center;
    transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    cursor: pointer;
    
}

/* Ensure sheets don't intercept clicks when they shouldn't */
.book-sheet.flipped {
    transform: rotateY(-180deg);
}

.page-side {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    background-color: #FAFAFA;
    /* Off-white paper color */
    overflow: hidden;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    
}


/* Base styling for front and back */
.page-side.front {
    transform: rotateY(0deg);
}

.page-side.back {
    transform: rotateY(180deg);
}

/* Adds the spine shadow to simulate depth and binding */
.page-shadow {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 60px;
    background: linear-gradient(to right, rgba(0, 0, 0, 0.25), transparent);
    pointer-events: none;
    z-index: 10;
}

.page-image {
    width: 100%;
    height: 100%;
    object-fit: contain; /* changed from cover to contain to prevent cropping */
    background-color: #FAFAFA;
    user-select: none;
    -webkit-user-drag: none;
}

/* For spread images (32:9 ratio), we need to split them across two pages */
.page-image.spread-left {
    object-fit: cover;
    object-position: left center;
    width: 200%; /* Make image twice as wide */
    max-width: 200%;
    transform: translateX(25%); /* Shift to show left half */
}

.page-image.spread-right {
    object-fit: cover;
    object-position: right center;
    width: 200%; /* Make image twice as wide */
    max-width: 200%;
    transform: translateX(-25%); /* Shift to show right half */
}

/* Thicker border for covers */
.book-sheet.is-cover .page-side {
    background-color: #222;
}

/* Beautiful floating bottom bar controls */
.floating-controls {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(20, 20, 20, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 8px 16px;
    border-radius: 9999px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    z-index: 100;
}

.control-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.8);
    transition: all 0.2s ease;
    border: none;
    background: transparent;
    cursor: pointer;
}

.control-btn:hover:not(:disabled) {
    color: white;
    background: rgba(255, 255, 255, 0.1);
}

.control-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.control-btn.play-active {
    color: #EAB308;
    background: rgba(234, 179, 8, 0.1);
}

.page-counter {
    color: rgba(255, 255, 255, 0.9);
    font-size: 13px;
    font-weight: 500;
    padding: 0 8px;
    font-variant-numeric: tabular-nums;
}